<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Video Ad</title>
</head>
<body style="font-family:Arial,sans-serif;max-width:400px;margin:40px auto;padding:20px;text-align:center;">
  <h1>ğŸ¬ Premium Video Ad</h1>
  <p>Watch 25s â†’ Earn â‚¹3-5 instantly!</p>
  <button id="showAd" style="background:#1a73e8;color:white;border:none;padding:15px 30px;border-radius:8px;font-size:18px;cursor:pointer;">â–¶ï¸ Watch Ad</button>
  <div id="status" style="margin:20px 0;font-weight:bold;color:#28a745;"></div>

  <script src="//libtl.com/sdk.js" data-zone="10214030" data-sdk="show_10214030"></script>
  
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const API_URL = urlParams.get('api');
    const userId = parseInt(urlParams.get('user_id'));
    
    document.getElementById('showAd').onclick = async () => {
      document.getElementById('status').textContent = 'â³ Loading ad...';
      
      try {
        await show_10214030();
        document.getElementById('status').textContent = 'ğŸ’° Claiming reward...';
        
        const res = await fetch(API_URL, {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({user_id: userId, result: 'video_completed'})
        });
        
        const data = await res.json();
        document.getElementById('status').innerHTML = 
          data.success ? `âœ… â‚¹${data.reward} added! Balance: â‚¹${data.new_balance}` : 'âŒ Failed';
      } catch(e) {
        document.getElementById('status').textContent = 'âŒ Network error';
      }
    };
  </script>
</body>
</html>
